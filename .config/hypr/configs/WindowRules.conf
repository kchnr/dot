########################################################################################
# GENERIC & ACTIVITY-BASED WINDOW RULES (v0.47.0+)
########################################################################################

# --- 1. THE "ACTION" CATCH-ALL (Open/Save/Upload) ---
# This targets words used in 99% of file dialogs (VS Code, MGCB, Zed, Browsers).
windowrule = match:initial_title (?i).*(Open|Save|Picker|Folder|File|Upload|Download|Export).*, float on
windowrule = match:initial_title (?i).*(Open|Save|Picker|Folder|File|Upload|Download|Export).*, size 1000 700
windowrule = match:initial_title (?i).*(Open|Save|Picker|Folder|File|Upload|Download|Export).*, center on

# --- 2. THE "COMMUNICATION" CATCH-ALL (Confirm/Alert) ---
# Matches "Are you sure", "Discard", "Authentication", etc.
windowrule = match:modal true, float on
windowrule = match:initial_title (?i).*(Confirm|Are you sure|Discard|Conflict|Warning|Error|Alert|Message).*, float on
windowrule = match:initial_title (?i).*(Authentication|Policy|Permission|Credential|Login|Unlock).*, float on

# --- 3. THE "SYSTEM & UTILITY" CATCH-ALL ---
# Installer bars, Preferences windows, and small utilities.
windowrule = match:initial_title (?i).*(Updating|Installing|Progress|Downloading|Transferring).*, float on
windowrule = match:initial_title (?i).*(Preferences|Settings|Properties|Options|About|Info).*, float on

# --- 4. ENGINE & ART (Identity-based Partial Matching) ---
# If the class contains 'mgcb', 'godot', 'unity', or 'blender', we apply rules.
# The 'negative:' regex helps distinguish the main app from its sub-windows.
windowrule = match:initial_class (?i).*(mgcb|godot|unity|unreal|blender|aseprite).*, float on
windowrule = match:initial_class (?i).*(mgcb|godot|unity|unreal|blender|aseprite).*, match:title (?i).*(editor|main|project|studio), tile on

# --- 5. SYSTEM PORTALS ---
# Standard Linux file pickers and policy kits
windowrule = match:class (?i).*(portal|polkit|nwg-).*, float on

# --- 6. SCRATCHPADS & MEDIA ---
windowrule = match:workspace special:scratchpad, float on
windowrule = match:workspace special:scratchpad, size 85% 85%
#windowrule = match:class (?i).*(chromium|chrome|firefox).*, match:title (?i).*(music|youtube|spotify).*, float on

# --- 7. THE GLOBAL SAFETY NET ---
# Ensure every floating window is centered automatically
windowrule = match:float true, center on
